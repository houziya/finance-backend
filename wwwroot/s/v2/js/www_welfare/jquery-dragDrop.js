(function(a){a.extend({mouseCoords:function(b){if(b.pageX||b.pageY){return{x:b.pageX,y:b.pageY}}return{x:b.clientX+document.body.scrollLeft-document.body.clientLeft,y:b.clientY+document.body.scrollTop-document.body.clientTop}},getStyle:function(c,b){return c.currentStyle?c.currentStyle[b]:document.defaultView.getComputedStyle(c,null)[b]}});a.fn.dragDrop=function(b){var c=a.extend({},a.fn.dragDrop.defaults,b);return this.each(function(){var f=false;var e=a(this);var g=c.focuEle?a(c.focuEle,e):e;if(!g||g.length<=0){alert("focuEle is not found! the element must be a child of "+this.id);return false}var d={initDiffX:"",initDiffY:"",moveX:"",moveY:""};e.css({position:"absolute",top:"0"});g.bind("mousedown",function(h){f=true;e.css({cursor:"move"});if(e.get(0).setCapture){e.get(0).setCapture()}d.initDiffX=a.mouseCoords(h).x-e.position().left;d.initDiffY=a.mouseCoords(h).y-e.position().top});g.bind("mousemove",function(h){if(f){d.moveX=a.mouseCoords(h).x-d.initDiffX;d.moveY=a.mouseCoords(h).y-d.initDiffY;if(c.fixarea){if(d.moveX<c.fixarea[0]){d.moveX=c.fixarea[0]}if(d.moveX>c.fixarea[1]){d.moveX=c.fixarea[1]}if(d.moveY<c.fixarea[2]){d.moveY=c.fixarea[2]}if(d.moveY>c.fixarea[3]){d.moveY=c.fixarea[3]}}if(c.dragDirection=="all"){e.css({left:d.moveX,top:d.moveY})}else{if(c.dragDirection=="vertical"){e.css({top:d.moveY})}else{if(c.dragDirection=="horizontal"){e.css({left:d.moveX})}}}if(c.callback){c.callback.call(c.callback,d)}}});g.bind("mouseup",function(h){f=false;e.css({cursor:"default"});if(e.get(0).releaseCapture){e.get(0).releaseCapture()}})})};a.fn.dragDrop.defaults={focuEle:null,callback:null,dragDirection:"horizontal",fixarea:null}})(jQuery);
